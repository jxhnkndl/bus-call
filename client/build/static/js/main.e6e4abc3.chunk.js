(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{115:function(e,t,c){},117:function(e,t,c){},118:function(e,t,c){},120:function(e,t,c){},122:function(e,t,c){},123:function(e,t,c){},124:function(e,t,c){},125:function(e,t,c){},126:function(e,t,c){},127:function(e,t,c){},128:function(e,t,c){},130:function(e,t,c){},131:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(26),i=c.n(a),s=c(39),r=c(16),l=(c(92),c(31)),d=c(65),o=c.n(d),j=function(){return o.a.get("/api/gigs")},m=function(e){return o.a.post("/api/gigs",e)},h=c(14),b=(c(81),c(9),c(1));var u=c(53),O=c(68),x=c(19);function p(){var e=Object(r.b)().loginWithRedirect;return Object(b.jsx)(x.a,{className:"m-2 px-4 py-2",variant:"primary",onClick:function(){return e()},children:"Log In"})}function v(){var e=Object(r.b)().logout;return Object(b.jsxs)(x.a,{className:"m-2 px-4 py-2",variant:"primary",onClick:function(){return e()},children:["Log Out",Object(b.jsx)("i",{className:"fas fa-sign-out-alt ml-2"})]})}c(115);function g(){var e=Object(r.b)().isAuthenticated;return Object(b.jsxs)(u.a,{variant:"dark",expand:"lg",children:[Object(b.jsx)(u.a.Brand,{href:"/",children:"Bus Call"}),Object(b.jsx)(u.a.Toggle,{"aria-controls":"nav-drawer"}),Object(b.jsxs)(u.a.Collapse,{id:"nav-drawer",children:[Object(b.jsx)(O.a,{className:"mr-auto",children:Object(b.jsx)(s.b,{className:"nav-link",exact:!0,to:"/dashboard",children:"Dashboard"})}),Object(b.jsx)(O.a,{children:e?Object(b.jsx)(v,{}):Object(b.jsx)(p,{})})]})]})}var f=c(141),N={initial:{opacity:0,scale:.8},in:{opacity:1,scale:1},out:{opacity:0,scale:1.2}},S={type:"tween",ease:"anticipate",duration:.3};c(117);function w(e){return Object(b.jsx)("div",{className:"dash-card ".concat(e.spacing," ").concat(e.flex),children:e.children})}c(118);function y(){return Object(b.jsx)("header",{children:Object(b.jsx)("h1",{className:"display-1 heading text-center mt-5",children:"Touring made simple."})})}var k=c(45),C=c.n(k),T=c(58),D=c(46),A=c(140),E=c(38);c(120);function _(e){return Object(b.jsx)("div",{className:"row mb-2 dashboard-nav",children:Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)(w,{flex:"d-flex align-items-center justify-content-between",spacing:"px-4 py-2 m-2 m-md-0",children:[Object(b.jsxs)(E.a,{className:"d-inline-block",children:[Object(b.jsx)(E.a.Toggle,{id:"dropdown-basic",children:"Options"}),Object(b.jsxs)(E.a.Menu,{children:[Object(b.jsx)(E.a.Item,{onSelect:function(t){return e.handleView("gig")},children:"View Gigs"}),Object(b.jsx)(E.a.Item,{onSelect:function(t){return e.handleView("tour")},children:"View Tour"}),Object(b.jsx)(E.a.Item,{onSelect:function(t){return e.handleView("form")},children:"Add/Edit Gig"})]})]}),"gig"===e.view&&Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"nav-icon mb-0 mr-2",onClick:e.prev,children:Object(b.jsx)("i",{className:"fas fa-arrow-circle-left"})}),Object(b.jsx)("p",{className:"nav-icon mb-0 ml-2",onClick:e.next,children:Object(b.jsx)("i",{className:"fas fa-arrow-circle-right"})})]})]})})})}var I=c(29),L=c(64),P=c.n(L);c(122);function V(e){var t=[{name:"Lounge",icon:"fas fa-couch",value:e.greenrooms},{name:"Catering",icon:"fas fa-pizza-slice",value:e.catering},{name:"Internet",icon:"fas fa-wifi",value:e.internet},{name:"Parking",icon:"fas fa-parking",value:e.parking},{name:"Showers",icon:"fas fa-shower",value:e.showers},{name:"Full Rider",icon:"fas fa-cocktail",value:e.rider}];return Object(b.jsxs)("div",{className:"info-container",children:[Object(b.jsxs)("div",{className:"card-item",children:[Object(b.jsxs)("p",{className:"h5 mb-1 small-heading",children:[Object(b.jsx)("i",{className:"far fa-calendar mr-2"}),"Today is"]}),Object(b.jsx)("p",{className:"h2",children:e.date})]}),Object(b.jsxs)("div",{className:"card-item",children:[Object(b.jsxs)("p",{className:"h5 mb-1 small-heading",children:[Object(b.jsx)("i",{className:"fas fa-map-marker-alt mr-2"}),"You are in"]}),Object(b.jsx)("p",{className:"h2",children:"".concat(e.city,", ").concat(e.state,".")})]}),Object(b.jsxs)("div",{className:"card-item",children:[Object(b.jsxs)("p",{className:"h5 mb-1 small-heading",children:[Object(b.jsx)("i",{className:"fas fa-headphones-alt mr-2"}),"Tonight's show"]}),Object(b.jsx)("p",{className:"h2",children:e.venue}),Object(b.jsx)("p",{className:"h5 mb-1",children:e.street}),Object(b.jsx)("p",{className:"h5 mb-1",children:"".concat(e.city,", ").concat(e.state,". ").concat(e.zip)})]}),Object(b.jsxs)("div",{className:"card-item",children:[Object(b.jsxs)("p",{className:"h5 mb-1 small-heading",children:[Object(b.jsx)("i",{className:"fas fa-ticket-alt mr-2"}),"Presale / Capacity"]}),Object(b.jsxs)("p",{className:"h2",children:[e.presale," / ",e.capacity]})]}),Object(b.jsxs)("div",{className:"card-item",children:[Object(b.jsx)("p",{className:"h5 mb-3 small-heading",children:"Amenities"}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-12",children:Object(b.jsx)(I.a,{variant:"flush",children:t.map((function(e,t){if(e.value)return Object(b.jsx)(I.a.Item,{className:"daysheet-item",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-3 col-md-2",children:Object(b.jsx)("p",{className:"list-item text-center mb-1",children:Object(b.jsx)("i",{className:"amenity-icon mr-2 ".concat(e.icon)})})}),Object(b.jsx)("div",{className:"col-9 col-md-10 daysheet-item",children:Object(b.jsx)("p",{className:"list-item mb-1",children:e.name})})]})},"".concat(t,"-").concat(e.name))}))},"amenities")})})]}),Object(b.jsxs)("div",{className:"card-item",children:[Object(b.jsxs)("p",{className:"h5 mb-1 small-heading",children:[Object(b.jsx)("i",{className:"fas fa-road mr-2"}),"Next up"]}),Object(b.jsx)("p",{className:"h2 mb-1",children:e.nextVenue}),Object(b.jsx)("p",{className:"h5 mb-1",children:e.nextDate}),Object(b.jsx)("p",{className:"h5 mb-1",children:"".concat(e.nextCity,", ").concat(e.nextState,".")}),Object(b.jsx)("p",{className:"h4 mb-1",children:e.distance})]})]})}c(123);function R(e){return Object(b.jsxs)("div",{className:"info-container",children:[Object(b.jsx)("p",{className:"dashboard-heading small-heading h5 mb-2",children:"Day Schedule"}),e.schedule.length?Object(b.jsx)(I.a,{variant:"flush",children:e.schedule.map((function(e,t){return Object(b.jsx)(I.a.Item,{className:"daysheet-item",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-12 col-lg-12",children:Object(b.jsx)("p",{className:"list-label pt-2 mb-1",children:e.timeString})}),Object(b.jsx)("div",{className:"col-12 col-lg-12",children:Object(b.jsx)("p",{className:"list-item mb-1",children:e.event})})]})},"".concat(t,"-").concat(e._id))}))},"schedule"):Object(b.jsx)("p",{className:"h2",children:"NOTHING SCHEDULED"})]})}c(124);function G(e){return Object(b.jsx)(A.a.div,{initial:"initial",animate:"in",exit:"out",variants:N,transition:S,children:Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-12 col-md-6 mb-4",children:Object(b.jsx)(w,{spacing:"p-4 p-md-4 m-2 m-md-0",children:Object(b.jsx)(V,{date:e.date,city:e.city,state:e.state,venue:e.venue,street:e.street,zip:e.zip,capacity:e.capacity,presale:e.presale,greenrooms:e.greenrooms,catering:e.catering,showers:e.showers,internet:e.internet,nextDate:e.nextDate,nextCity:e.nextCity,nextState:e.nextState,nextVenue:e.nextVenue,distance:e.distance})})}),Object(b.jsx)("div",{className:"col-12 col-md-6 mb-4",children:Object(b.jsx)(w,{spacing:"p-4 p-md-4 m-2 m-md-0",children:Object(b.jsx)(R,{schedule:e.schedule})})})]})})})}c(125);function H(e){return Object(b.jsx)(A.a.div,{initial:"initial",animate:"in",exit:"out",variants:N,transition:S,children:Object(b.jsx)("div",{className:"info-container",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-12 mb-4",children:Object(b.jsx)(w,{spacing:"p-4 p-md-4 m-2 m-md-0",children:Object(b.jsxs)("div",{className:"container-lg p-0",children:[Object(b.jsx)("h3",{className:"heading",children:"Full Tour Dates"}),Object(b.jsx)("p",{children:"Click a date to view show details"}),e.gigs.length?Object(b.jsx)(I.a,{variant:"",children:e.gigs.map((function(t,c){var n=t.schedule[3].timeString.split(" ")[0];return Object(b.jsx)(I.a.Item,{className:"tour-date row",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-12 col-md-8 mx-auto",children:[Object(b.jsxs)("p",{className:"small-heading pt-2 mb-1",children:[Object(b.jsx)("i",{className:"fas fa-calendar mr-2"}),e.handleDate(t.date)]}),Object(b.jsxs)("p",{className:"list-item mb-1 d-lg-inline-block",children:["".concat(t.venue.city,", ").concat(t.venue.state,". "),Object(b.jsx)("span",{className:"d-block d-lg-inline-block",children:"@ ".concat(t.venue.name)})]})]}),Object(b.jsx)("div",{className:"col-12 col-md-8 mx-auto",children:Object(b.jsxs)("p",{className:"list-label mb-1",children:["Doors @ ".concat(t.schedule[2].timeString),Object(b.jsx)("span",{className:"d-none d-md-inline-block mx-2",children:"/"}),Object(b.jsx)("span",{className:"d-block d-md-inline-block",children:"Show @ ".concat(n," PM")})]})}),Object(b.jsx)("div",{className:"col-12 col-md-8 mx-auto",children:Object(b.jsx)("p",{className:"list-label mb-1",children:"w/ Cartel, This Providence, Anarbor"})}),Object(b.jsx)("div",{className:"col-12 col-md-8 mx-auto",children:Object(b.jsx)(x.a,{id:t._id,variant:"primary",className:"my-2",onClick:function(t){e.gigs.length?e.handleSelect(t):l.b.error("Oh no! Something went wrong. Try again!")},children:"View Details"})})]})},"".concat(c,"-").concat(t._id))}))},"tour"):Object(b.jsx)("p",{className:"h2",children:"NO TOUR DATES TO DISPLAY"})]})})})})})})}var B=c(80),U=c(44),q={date:"",venue:{name:"",street:"",city:"",state:"",zip:"",capacity:"0",presale:"0"},catering:!1,internet:!1,showers:!1,greenrooms:!1,parking:!1,rider:!1,distance:"N/A",schedule:[{timeString:"",event:"Load In"},{timeString:"",event:"Soundcheck"},{timeString:"",event:"Doors"},{timeString:"",event:"Opener"},{timeString:"",event:"Second"},{timeString:"",event:"Direct"},{timeString:"",event:"Headliner"},{timeString:"",event:"Curfew"},{timeString:"",event:"Bus Call"}]},z=c(30);c(126);function F(e){var t=Object(n.useState)(q),c=Object(D.a)(t,2),a=c[0],i=c[1],s=[{timeString:"",event:"Load In"},{timeString:"",event:"Soundcheck"},{timeString:"",event:"Doors"},{timeString:"",event:"Opener"},{timeString:"",event:"Second"},{timeString:"",event:"Direct"},{timeString:"",event:"Headliner"},{timeString:"",event:"Curfew"},{timeString:"",event:"Bus Call"}],r=function(){var e=Object(T.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(a);case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(e){var t=e.target,c=t.name,n=t.value,s=a.venue;i("date"!==c?Object(h.a)(Object(h.a)({},a),{},{venue:Object(h.a)(Object(h.a)({},s),{},Object(U.a)({},c,n))}):Object(h.a)(Object(h.a)({},a),{},Object(U.a)({},c,n)))},o=function(e){var t=e.target,c=t.name,n=t.checked;i(Object(h.a)(Object(h.a)({},a),{},Object(U.a)({},c,n)))},j=function(e){var t=e.target,c=(t.name,t.value),n=e.target.dataset.index,s=Object(B.a)(a.schedule),r=s[n];r.timeString=c,s.splice(n,1,r),i(Object(h.a)(Object(h.a)({},a),{},{schedule:s}))},u=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)};return Object(b.jsx)(A.a.div,{initial:"initial",animate:"in",exit:"out",variants:N,transition:S,children:Object(b.jsx)("section",{children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)(w,{spacing:"p-4 p-md-4 m-2 m-md-0",children:[Object(b.jsx)("p",{className:"h2 heading",children:"Add/Edit Gig"}),Object(b.jsxs)(z.a,{children:[Object(b.jsxs)("div",{className:"row",children:[[{name:"name",col:12,required:!0},{name:"street",col:12,required:!1},{name:"city",col:6,required:!0},{name:"state",col:6,required:!0},{name:"zip",col:6,required:!1},{name:"date",col:6,required:!0},{name:"capacity",col:6,required:!1},{name:"presale",col:6,required:!1}].map((function(e,t){return Object(b.jsx)("div",{className:"col-".concat(e.col),children:Object(b.jsxs)(z.a.Group,{controlId:"".concat(e.name,"InputGroup"),children:[Object(b.jsx)(z.a.Label,{children:0===t?"Venue Name":"".concat(u(e.name))}),Object(b.jsx)(z.a.Control,{name:e.name,type:"date"===e.name?"date":"text",placeholder:"date"===e.name?"mm/dd/yyyy":"Enter ".concat(u(e.name)),value:a[e.name],onChange:d})]})},"inputField-".concat(t))})),Object(b.jsx)("div",{className:"col-12",children:Object(b.jsx)("p",{className:"small-heading",children:"Amenities (Select all that apply):"})}),["catering","internet","showers","greenrooms","parking","rider"].map((function(e,t){return Object(b.jsx)("div",{className:"col-6 col-md-4",children:Object(b.jsx)(z.a.Check,{type:"checkbox",name:e,label:"".concat(u(e)),checked:a[e],onChange:o})},"checkbox-".concat(t))})),Object(b.jsx)("div",{className:"col-12 pt-3",children:Object(b.jsx)("p",{className:"small-heading",children:"Insert time strings for each block:"})}),s.map((function(e,t){return Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)(z.a.Group,{children:[Object(b.jsx)(z.a.Label,{children:e.event}),Object(b.jsx)(z.a.Control,{"data-index":t,name:e.event,type:"text",placeholder:"Enter ".concat(e.event," start time"),value:a.schedule.timeString,onChange:j,onSubmit:function(){return i(Object(h.a)(Object(h.a)({},a),{},{schedule:s}))}})]})},"block-".concat(e.event))}))]}),Object(b.jsx)("div",{className:"row pt-3",children:Object(b.jsx)("div",{className:"col-12",children:Object(b.jsx)(x.a,{type:"submit",variant:"primary",className:"py-2 px-3",onClick:function(t){t.preventDefault(),a.date&&(console.log(a),r(),Object(l.b)("Gig created!"),Array.from(document.querySelectorAll("input")).forEach((function(e){return e.value=""})),i(q),setTimeout((function(){e.fetchGigs()}),250))},children:"Add Gig"})})})]})]})})})})})}c(127);function M(){var e=Object(n.useState)([]),t=Object(D.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(0),s=Object(D.a)(i,2),r=s[0],d=s[1],o=Object(n.useState)("gig"),m=Object(D.a)(o,2),h=m[0],u=m[1];Object(n.useEffect)((function(){O()}),[]);var O=function(){var e=Object(T.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching gigs..."),e.prev=1,e.next=4,j();case 4:t=e.sent,a(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),x=function(e){return P()(e).format("ddd. MMMM D, YYYY")},p=function(){r===c.length-1?d(0):(console.log(c),d(r+1))},v=function(){d(0===r?c.length-1:r-1)};return Object(b.jsx)(A.a.div,{initial:"initial",animate:"in",exit:"out",variants:N,transition:S,children:Object(b.jsx)("section",{className:"p-2 px-md-4 px-lg-5",children:c.length?Object(b.jsxs)("div",{children:[Object(b.jsx)(_,{prev:v,next:p,gigs:c,view:h,handleView:function(e){u(e)}}),"gig"===h&&Object(b.jsx)(G,{date:x(c[r].date),city:c[r].venue.city,state:c[r].venue.state,venue:c[r].venue.name,street:c[r].venue.street,zip:c[r].venue.zip,capacity:c[r].venue.capacity,presale:c[r].venue.presale,greenrooms:c[r].greenrooms,catering:c[r].catering,showers:c[r].showers,internet:c[r].internet,nextDate:c[r+1]?x(c[r+1].date):"N/A",nextCity:c[r+1]?c[r+1].venue.city:"N/A",nextState:c[r+1]?c[r+1].venue.state:"N/A",nextVenue:c[r+1]?c[r+1].venue.name:"N/A",distance:"315 miles",schedule:c[r].schedule,prev:v,next:p}),"tour"===h&&Object(b.jsx)(H,{gigs:c,handleDate:x,handleSelect:function(e){e.preventDefault();var t=e.target.id,n=c.findIndex((function(e){return e._id===t}));if(-1===n)return l.b.error("Something went wrong! Please try again."),void console.log(e.target);console.log("Accessing gig..."),d(n),u("gig"),window.scrollTo(0,0)}}),"form"===h&&Object(b.jsx)(F,{fetchGigs:O,gigs:c})]}):Object(b.jsx)("p",{className:"h2",children:"LOADING"})})})}function W(){var e=Object(r.b)(),t=e.isLoading,c=e.isAuthenticated;return t?Object(b.jsx)("main",{style:{overflow:"hidden"},children:Object(b.jsx)(f.a,{exitBeforeEnter:!0,children:Object(b.jsx)("h3",{className:"text-center",children:"Loading dashboard..."})})}):Object(b.jsx)("main",{style:{overflow:"hidden"},className:"",children:Object(b.jsx)(f.a,{exitBeforeEnter:!0,children:c?Object(b.jsx)(M,{}):Object(b.jsx)(y,{})})})}c(128);function K(){return Object(b.jsx)("footer",{children:Object(b.jsx)("p",{children:"Powered by jxhnkndl"})})}c(129),c(130);function Y(){var e=Object(r.b)(),t=e.isAuthenticated;e.isLoading;return console.log(t),Object(b.jsxs)("div",{className:"app-container",children:[Object(b.jsx)(g,{}),Object(b.jsx)(W,{}),Object(b.jsx)(K,{}),Object(b.jsx)(l.a,{position:"top-right",autoClose:3e3,hideProgressionBar:!1,newestOnTop:!0,closeOnClick:!0})]})}var J=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_DOMAIN,Q=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_CLIENT_ID;i.a.render(Object(b.jsx)(r.a,{domain:J,clientId:Q,redirectUri:window.location.origin,children:Object(b.jsx)(s.a,{children:Object(b.jsx)(Y,{})})}),document.getElementById("root"))},92:function(e,t,c){}},[[131,1,2]]]);
//# sourceMappingURL=main.e6e4abc3.chunk.js.map